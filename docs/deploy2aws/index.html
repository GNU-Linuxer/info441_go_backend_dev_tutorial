<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="../lib/bulma.min.css"><link rel="stylesheet" href="../lib/font-awesome-4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="../lib/prism.css"><link rel="icon" href="../img/page-icon.png"><meta property="og:type" content="website"><meta property="og:site_name" content="INFO Tutorials"><meta property="og:title" content="Deploying to Amazon Web Services"><meta property="og:description" content="How to run Docker containers on AWS EC2"><meta property="og:image" content="https://drstearns.github.io/tutorials/img/page-icon.png"><title>Deploying to Amazon Web Services</title><style>.is-funky{background-image:linear-gradient(to right,#006064,#880E4F)}.is-funky .subtitle,.is-funky .title{color:#fff}.screenshot{border:1px dotted #ccc;padding:10px;margin-bottom:1em}.bookmark-link{color:#ddd;margin-left:.25em}.home-link{color:#eee}.home-link:hover{color:#fff}.byline{font-size:.85rem;font-style:italic}.shaded{background-color:#eee}</style></head><body><header><div class="hero is-funky"><div class="hero-body"><div class="container"><div class="columns is-mobile"><div class="column"><h1 class="title">Deploying to Amazon Web Services</h1><p class="subtitle">How to run Docker containers on AWS EC2</p></div><div class="column is-narrow"><a href=".." class="home-link"><span class="icon is-medium"><i class="fa fa-home" aria-hidden="true" aria-label="back to table of contents"></i></span></a></div></div></div></div></div></header><main class="section"><div class="container"><div class="content"><p class="byline">Last edited on Apr 1, 2018 by <a href="https://ischool.uw.edu/people/faculty/dlsinfo">Dave Stearns</a></p><p>Amazon Web Services (AWS) is a popular choice for hosting web applications. As opposed to <a href="../deploy2do/">DigitalOcean</a>, AWS offers both low-level self-serviced infrastructure services as well as higher-level completely-managed platform services. In this tutorial, I will show you how to deploy Docker containers to AWS Elastic Compute Cloud (EC2) instances, which are Linux Virtual Machines (VMs) similar to DigitalOcean Droplets.</p><blockquote><p><em>NOTE:</em> Creating EC2 instances can cost you money, but if you sign up for a new AWS account, or if you sign up for AWS Educate and get the credits applied to your account, the steps done in this tutorial won't cost you anything. If your account is older than one year, and if you don't have any AWS Educate credits, this will cost you some money. See <a href="https://aws.amazon.com/ec2/pricing/">AWS EC2 Pricing</a> for details.</p></blockquote><h2 id="secsignupforawsandawseducate">Sign Up for AWS and AWS Educate</h2><p>To get started with AWS, <a href="https://aws.amazon.com/">sign up for a free account</a>. For the first twelve months of your account, you will have free access to the services in their "free tier," which includes the low-power VMs we will create in this tutorial.</p><p>If you are a student, also sign up for <a href="https://aws.amazon.com/education/awseducate/">AWS Educate</a>. Once approved you will get AWS credits that you can renew each year.</p><h2 id="sectheec2service">The EC2 Service</h2><p>After you sign in to the AWS dashboard, you will see a list of all the services that AWS offers. The one you want is the EC2 service, which is under the Compute section.</p><p><img src="img/aws-dashboard.png" alt="AWS dashboard screenshot"></p><p>Click on the EC2 link to go to the EC2 dashboard. Once there, click the <em>Launch Instance</em> button in the middle of the screen.</p><p><img src="img/ec2-create-instance.png" alt="EC2 Create Instance screenshot"></p><h2 id="secamis">AMIs</h2><p>The next screen asks you to choose an Amazon Machine Image (AMI), which is a pre-configured virtual machine image. EC2 offers base images for all the various Linux Distributions, plus images that add commonly-used software to those distros. For this tutorial, we will use version 2 of Amazon's own Linux distro, commonly known as Amazon Linux 2.</p><p><img src="img/ec2-amazon-linux-2.png" alt="Amazon Linux 2 distro option"></p><h2 id="secsize">Size</h2><p>The next screen asks you to choose an instance type, which determines how powerful your VM will be. Keep in mind that the more CPUs, memory, and network performance you choose, the more you will pay. For this tutorial, choose the "t2.micro" option, which is in AWS's "free tier" and is relatively inexpensive.</p><p><img src="img/ec2-instance-type.png" alt="choosing instance type screenshot"></p><p>Make sure you've selected the "t2.micro" size and then click the <em>Review and Launch</em> button at the bottom of the screen.</p><h2 id="secsshkeypair">SSH Key Pair</h2><p>The next screen shows you a confirmation page, and allows you to adjust a few of the default settings. For now, accept all the defaults and click the <em>Launch</em> button. This will bring up a dialog box you can use to select an existing SSH key pair, or create a new one.</p><p><img src="img/ec2-key-pair.png" alt="creating a key pair screenshot"></p><p>An SSH key pair is an <a href="../https/">asymmetric encryption key pair</a> that is used not only to authenticate you on this new VM, but also to encrypt all of the SSH communication between your development machine and this new VM.</p><p>If you don't already have a key pair registered with AWS, create a new one and download the new private key. The private key will be in a <code>.pem</code> file, which is a base64-encoded version of the key.</p><p>It's typical to move this downloaded private key to an <code>.ssh</code> directory just inside your home directory (<code>~/.ssh/</code>). That directory may not exist yet on your machine, but you can ensure that it does using this command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> -p ~/.ssh/</code></pre><p>Copy the downloaded <code>.pem</code> file to that directory and then use this command to set the file permissions so that only your user account can read the file, and no one can modify it. Replace <code>name-of-key-file.pem</code> with the name of your private key PEM file.</p><pre class="language-bash"><code class="language-bash"><span class="token function">chmod</span> 400 ~/.ssh/name-of-key-file.pem</code></pre><p>This key is like a password, so it should remain secret and accessible only by you. <em>Do not add private keys to your GitHub repos, and do not send them as email attachments</em>. They must be kept private. If your key is compromised, you should terminate any EC2 instances that use that key and generate a new key pair.</p><p>AWS will install the associated public key on your new EC2 instance so that you can connect to it using the private key you just downloaded. AWS will also hold on to the associated public key, and the next time you launch an EC2 instance, you can choose to use that same key pair.</p><h2 id="seclaunch">Launch!</h2><p>After downloading the private key, launch your instance. This will create a new Amazon Linux 2 VM, and you should be able to see it starting up in your list of EC2 instances.</p><p>Once your instance is running and ready for an SSH connection, click on the instance in the list and find the <em>Public DNS (IPv4)</em> name for your new CM. It should be a sub-domain of <code>compute.amazonaws.com</code> (for example, <code>ec2-nn-nn-nn-nn.us-west-2.compute.amazonaws.com</code>. Copy this value to the clipboard.</p><p><img src="img/ec2-pub-dns.png" alt="public DNS screenshot"></p><p>return to your terminal and use this command to connect to your new VM, replacing <code>name-of-key-file.pem</code> with the name of your SSH private key file, and <code>your-public-dns</code> with the Public DNS name of your new VM.</p><pre class="language-bash"><code class="language-bash"><span class="token function">ssh</span> -i ~/.ssh/name-of-key-file.pem ec2-user@your-public-dns</code></pre></div></div></main><footer class="footer"><div class="container"><div class="content"><p>Created by <a href="https://ischool.uw.edu/people/faculty/dlsinfo">Dave Stearns</a>, <a href="https://ischool.uw.edu">The Information School</a>, <a href="https://uw.edu">University of Washington</a></p><p><a href=".."><span class="icon"><i class="fa fa-home"></i> </span>back to contents</a></p></div></div></footer><script>var headings=document.querySelectorAll("h2,h3,h4,h5");headings.forEach(function(e){var a=document.createElement("a");a.textContent="#",a.href="#"+e.id,a.classList.add("bookmark-link"),e.appendChild(a)})</script><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga"),ga("create","UA-102177301-1","auto"),ga("send","pageview")</script></body></html>